(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{274:function(t,e,n){var content=n(440);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("f6b8b888",content,!0,{sourceMap:!1})},439:function(t,e,n){"use strict";var o=n(274);n.n(o).a},440:function(t,e,n){e=t.exports=n(38)(!1);var o=n(182),r=o(n(441)),c=o(n(442)),d=o(n(443)),l=o(n(444)),f=o(n(445)),h=o(n(446)),m=o(n(447));e.push([t.i,".index-container[data-v-4240a9f5]{width:100vw;background-size:cover;background-repeat:no-repeat}.index-container .top[data-v-4240a9f5]{padding-top:9.67rem;background-image:url("+r+");background-size:cover;background-repeat:no-repeat;width:100vw;height:22.07rem}.index-container .top .class-content[data-v-4240a9f5]{display:flex;flex-direction:column;width:9.33rem;height:4.67rem;margin-left:0.33rem;padding:1.44rem 0.73rem 0.43rem}.index-container .top .class-content .class-content-title[data-v-4240a9f5]{color:#060002;font-size:0.48rem;font-weight:bold}.index-container .top .class-content .class-content-describe[data-v-4240a9f5]{color:#878787;font-size:0.35rem;margin-top:0.28rem}.index-container .top .class-content .class-content-bottom[data-v-4240a9f5]{display:flex;justify-content:space-between;align-items:flex-end;color:#fff;margin-top:0.48rem;font-size:0.45rem}.index-container .top .class-content .class-content-bottom div span[data-v-4240a9f5]:nth-child(2){font-size:0.8rem;font-weight:bold}.index-container .bottom[data-v-4240a9f5]{position:relative;background-size:cover;background-repeat:no-repeat;background-image:url("+c+");width:100vw;height:26.41rem}.index-container .bottom .tab[data-v-4240a9f5]{display:flex;justify-content:space-between;padding:0.5rem 1rem 0}.index-container .bottom .tab .tab-btn[data-v-4240a9f5]{width:3.65rem;height:1.23rem;color:#c6c5c5;font-size:0.53rem;font-weight:bold;line-height:1.1rem;text-align:center}.index-container .bottom .tab .active-btn[data-v-4240a9f5]{color:#fe5794 !important}.index-container .bottom .btn-content[data-v-4240a9f5]{width:100vw;position:fixed;bottom:0;left:0;display:flex;justify-content:space-between;padding:0.79rem 0.45rem 0.95rem}.index-container .bottom .btn-content div[data-v-4240a9f5]{width:4.4rem;height:1.6rem;background-size:cover;background-repeat:no-repeat;font-size:0.48rem;line-height:1.6rem;text-align:center;font-family:FZYuan}.index-container .bottom .btn-content div[data-v-4240a9f5]:nth-child(1){color:#ff327d;background-image:url("+d+")}.index-container .bottom .btn-content div[data-v-4240a9f5]:nth-child(2){color:#ffffff;background-image:url("+l+")}.bg-grey[data-v-4240a9f5]{background-image:url("+d+") !important}.bg-detail[data-v-4240a9f5]{background-image:url("+f+") !important;height:50.25rem !important}.bg-spell[data-v-4240a9f5]{background-image:url("+h+") !important;height:21.37rem !important}.bg-top-spell[data-v-4240a9f5]{background-image:url("+m+") !important;height:22.11rem !important}\n",""])},441:function(t,e,n){t.exports=n.p+"img/fc61232.png"},442:function(t,e,n){t.exports=n.p+"img/925cfba.png"},443:function(t,e,n){t.exports=n.p+"img/1f2e701.png"},444:function(t,e,n){t.exports=n.p+"img/d3b25a0.png"},445:function(t,e,n){t.exports=n.p+"img/6ac1ba4.png"},446:function(t,e,n){t.exports=n.p+"img/a7b0462.png"},447:function(t,e,n){t.exports=n.p+"img/0b8f78f.png"},574:function(t,e,n){"use strict";n.r(e);var o=n(355),r=n(356),dialog=n(237),c=n(180),d=(n(40),n(5)),l=(n(73),n(13),n(111),n(108),n(110),n(213));console.log("wx",l);var f=function(){var t=Object(d.a)(regeneratorRuntime.mark(function t(){var e,n,o,r,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t){-1==window.location.href.indexOf("from")&&-1==window.location.href.indexOf("isappinstalled")||(window.location.href=window.location.href.split("&")[0]),c.a.get("Web/Api/getDyhSignature?url=".concat(decodeURIComponent(window.location.href.split("#")[0]))).then(function(e){t(e.data)})});case 2:return e=t.sent,n=e.appId,o=e.timestamp,r=e.nonceStr,d=e.signature,f={debug:!1,appId:n,timestamp:o,nonceStr:r,signature:d,jsApiList:["checkJsApi","updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage","onMenuShareTimeline","chooseWXPay"]},l.config(f),t.abrupt("return",l);case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),h=n(334),m=n(244),v={head:function(){return{title:"拼团「Smart Phonics智慧自然拼读小课堂」"}},data:function(){return{showPopup:!1,activeTab:"rule",showDialog:!1,dialogText:"",popupType:"download",groupCount:178,GroupStatus:"0",statusCode:0,groupbuyId:"",openId:"",currentUser:{},btnType:"",indexData:{}}},components:{popupDownloadApp:o.a,tabContent:r.a,"v-dialog":dialog.a},mounted:function(){console.log("加载首页"),Object(h.init)(),this.eventOnListen(),this.initData(),"wx"===sessionStorage.getItem("currentPlatform")&&(f(),this.wxLogin())},methods:{initData:function(){var t=this;c.a.get("/MiniProgramApi/LessonGroupBuy/getInfo").then(function(e){t.statusCode=e.code,3011===e.code?t.groupCount=200:t.groupCount=Object(h.getGroupCount)(e.data.count),t.GroupStatus=e.data.status,e.data.current_user&&(t.currentUser=e.data.current_user,t.$router.push({name:"group_buy-detail",query:{groupbuyId:e.data.current_user.groupbuy_id}}))})},wxLogin:function(){var t=this,e=Object(h.getQueryString)("code");e&&c.a.post("/MiniProgramApi/LessonGroupBuy/getWxLogin",{code:e}).then(function(e){(t.openId=e.data.open_id,0===e.data.is_login)?t.$router.push({name:"group_buy-login"}):"myGroupBuy"===Object(h.getQueryString)("btnType")?t.$router.push({name:"group_buy-my_group"}):t.funPay()})},tabChange:function(t){this.activeTab=t},myGroupBuy:function(){switch(this.btnType="myGroupBuy",sessionStorage.getItem("currentPlatform")){case"wx":Object(h.getWXCode)();break;case"app":this.$router.push({name:"group_buy-my_group"});break;case"other":this.$router.push({name:"group_buy-prompt"})}},funPay:function(){var t=this;console.log(location.href);var e={};this.$store.state.groupBuy.platform.isWeixin&&(e.open_id=this.openId),c.a.post("/MiniProgramApi/LessonGroupBuy/openGroup",e).then(function(e){if(0!==e.code)return t.showDialog=!0,void(t.dialogText=e.msg);t.groupbuyId=e.data.groupbuy.id;var n=e.data.order;if(t.$store.state.groupBuy.platform.isWeixin){var o=JSON.parse(e.data.pay.data);console.log(o),setTimeout(function(){wx.chooseWXPay({timestamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(t){that.$router.push({name:"group_buy-detail",query:{groupbuyId:that.groupbuyId}})},fail:function(t){console.log(t)}})},500)}else Object(h.jsCallNative)(n)}).catch(function(t){console.log("axios error",t)})},startGroupBuy:function(){var t=sessionStorage.getItem("currentPlatform");if(console.log("currentPlatform",t),this.btnType="startGroupBuy",this.currentUser.is_leader){if("1"===this.currentUser.is_leader)return;"0"===this.currentUser.is_leader&&(this.showDialog=!0,this.dialogText="您已参团，每人限拼团1次")}else{if(3013===this.statusCode)return this.showDialog=!0,void(this.dialogText="此活动仅限abc360老学员(购买过正式课)发起");if(200===this.groupCount)return this.showPopup=!0,void(this.popupType="download");switch(t){case"wx":Object(h.getWXCode)();break;case"app":this.funPay();break;case"other":this.$router.push({name:"group_buy-prompt"})}}},funBtnSide:function(){this.activeTab="spell"},goBack:function(){this.activeTab="detail"},eventOnListen:function(){var t=this;m.a.on("nativePayCallBack",function(data){var e=t.groupbuyId;"0"===data.result?t.$router.push({name:"group_buy-detail",query:{groupbuyId:e,indexPay:"true"}}):(t.showDialog=!0,t.dialogText="支付失败")})},downloadAppClick:function(){Object(h.groupbuy_downloadApp)()}}},y=(n(439),n(19)),component=Object(y.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-container"},[n("div",{class:[{"bg-top-spell":"spell"===t.activeTab},"top"]},[n("div",{staticClass:"class-content"},[n("span",{staticClass:"class-content-title"},[t._v("Smart Phonics智慧自然拼读小课堂")]),t._v(" "),n("span",{staticClass:"class-content-describe"},[t._v("每天10分钟跟外教轻松入门自然拼读")]),t._v(" "),n("div",{staticClass:"class-content-bottom"},[t._m(0),t._v(" "),n("span",[t._v("已拼"+t._s(t.groupCount)+"团")])])])]),t._v(" "),n("div",{class:[{"bg-detail":"detail"===t.activeTab,"bg-spell":"spell"===t.activeTab},"bottom"]},[n("div",{staticClass:"tab"},[n("span",{class:[{"active-btn":"rule"===t.activeTab},"tab-btn"],on:{click:function(e){return t.tabChange("rule")}}},[t._v("活动规则")]),t._v(" "),n("span",{class:[{"active-btn":"detail"===t.activeTab||"spell"===t.activeTab},"tab-btn"],on:{click:function(e){return t.tabChange("detail")}}},[t._v("课程详情")])]),t._v(" "),n("tab-content",{attrs:{activeTab:t.activeTab},on:{funBtnSide:t.funBtnSide,goBack:t.goBack}}),t._v(" "),n("div",{staticClass:"btn-content"},[n("div",{on:{click:t.myGroupBuy}},[t._v("我的拼团")]),t._v(" "),n("div",{class:{"bg-grey":"1"===t.currentUser.is_leader},on:{click:t.startGroupBuy}},[t._v("发起拼团")])])],1),t._v(" "),t.showPopup?n("popup-download-app",{attrs:{popupType:t.popupType},on:{downloadApp:t.downloadAppClick,closePopup:function(e){t.showPopup=!1}}}):t._e(),t._v(" "),t.showDialog?n("v-dialog",{attrs:{dialogText:t.dialogText},on:{closeDialog:function(e){t.showDialog=!1}}}):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("¥")]),this._v(" "),e("span",[this._v("19.9")]),this._v(" "),e("s",[this._v("¥99")])])}],!1,null,"4240a9f5",null);e.default=component.exports}}]);